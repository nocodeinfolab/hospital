<!DOCTYPE html>
<html>
    <head>
        <title>Protected Site</title>
        <script src="https://unpkg.com/@supabase/supabase-js@2"></script>
        <script>
            // Initialize Supabase
            const supabaseUrl = 'https://lskigydzrnfnxjsobzlk.supabase.co'
            const supabaseKey = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imxza2lneWR6cm5mbnhqc29iemxrIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDg3MTYyMTksImV4cCI6MjA2NDI5MjIxOX0.JV1e-2JutVwPsCIJUjzx8g-zi9TAEoxmPtZ2j0eWGOs'
            const supabase = supabase.createClient(supabaseUrl, supabaseKey)
            
            // Check auth state on page load
            supabase.auth.onAuthStateChange(async (event, session) => {
                if (!session) {
                    // If not logged in, redirect to login page
                    window.location.href = '/login.html';
                }
            });
        </script>
    </head>
    <body>
        <!-- Your protected content goes here -->
        <div id="protected-content" style="display: none;">
            <h1>Welcome to the protected page!</h1>
            <button id="sign-out">Sign Out</button>
        </div>

        <script>
            // Show content only when authenticated
            supabase.auth.getSession().then(({ data: { session } }) => {
                if (session) {
                    document.getElementById('protected-content').style.display = 'block';
                }
            });

            // Sign out button
            document.getElementById('sign-out').addEventListener('click', async () => {
                await supabase.auth.signOut();
                window.location.href = '/login.html';
            });
        </script>
    </body>
</html>
